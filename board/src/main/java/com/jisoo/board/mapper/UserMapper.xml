<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.jisoo.board.mapper.UserMapper">
  	<!-- 重複確認 -->
  	<select id="existsByLoginId" resultType="int">
  		select count(*)
  		from TBL_USER
  		where LOGIN_ID = #{userId}
  	</select>
  	
  	<insert id="insertUser">
  		insert into TBL_USER(LOGIN_ID, PASSWORD, NICKNAME)
  		values(#{userId}, #{userPw}, #{nickname})
  	</insert>
  	
  	<select id="findByLoginId" parameterType="string" resultType="com.jisoo.board.domain.UserVo">
	  SELECT
	    USER_ID,
	    LOGIN_ID,
	    PASSWORD,
	    NICKNAME,
	    ROLE,
	    CREATED_AT,
	    UPDATED_AT,
	    DELETED_AT
	  FROM TBL_USER
	  WHERE LOGIN_ID = #{loginId}
	</select>
	
	<select id="findByUserId" parameterType="Long" resultType="com.jisoo.board.domain.UserVo">
	  SELECT
	    USER_ID,
	    LOGIN_ID,
	    PASSWORD,
	    NICKNAME,
	    ROLE,
	    CREATED_AT,
	    UPDATED_AT,
	    DELETED_AT
	  FROM TBL_USER
	  WHERE USER_ID = #{userId}
	</select>
	
	<select id="findPasswordByUserId" parameterType="Long">
		SELECT
			PASSWORD
		FROM
			TBL_USER
		WHERE USER_ID = #{userId}
	</select>
	
	<update id="updateUserInfo">
		UPDATE TBL_USER
		SET NICKNAME = #{nickname}
		WHERE USER_ID = #{userId} 
	</update>
	
	<update id="updatePassword">
		UPDATE TBL_USER
		SET PASSWORD = #{password}
		WHERE USER_ID = #{userId}
	</update>
	
  </mapper>