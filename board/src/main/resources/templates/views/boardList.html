<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>掲示板一覧</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

	<!-- Header -->
	<header class="border-bottom py-3 bg-light">
		<div class="container d-flex align-items-center">
			<h2 class="mb-0">LOGO</h2>

			<a href="/" class="btn btn-outline-secondary ms-auto">
				ホームへ
			</a>
		</div>
	</header>


	<main class="container py-4">
		<div class="d-flex align-items-end justify-content-between mb-3">
			<div>
				<h3 class="mb-0">掲示板</h3>
				<small class="text-muted">投稿一覧</small>
			</div>
			<a href="/board/write" class="btn btn-primary">
				投稿
			</a>

		</div>

		<!-- Search -->
		<div class="card shadow-sm mb-3">
			<div class="card-body">
				<form class="row g-2 align-items-center" method="get" action="/board">
					<div class="col-12 col-md-3">
						<select name="searchType" class="form-select">
							<option value="title">タイトル</option>
							<option value="content">内容</option>
							<option value="writer">作成者</option>
						</select>
					</div>
					<div class="col-12 col-md-7">
						<input type="text" name="keyword" class="form-control" placeholder="キーワードを入力してください">
					</div>
					<div class="col-12 col-md-2 d-grid">
						<button class="btn btn-outline-secondary" type="submit">検索</button>
						<a class="btn btn-outline-secondary" th:href="@{/board(currentPage=1)}">条件解除</a>
					</div>
				</form>
			</div>
		</div>

		<!-- List -->
		<div class="card shadow-sm">
			<div class="card-body p-0">

				<div th:if="${#lists.isEmpty(list)}" class="p-4 text-center text-muted">
					投稿がありません
				</div>

				<div th:if="${not #lists.isEmpty(list)}" class="table-responsive">
					<table class="table table-hover mb-0 align-middle">
						<thead class="table-light">
							<tr>
								<th style="width: 80px;">番号</th>
								<th>タイトル</th>
								<th style="width: 140px;">作成者</th>
								<th style="width: 120px;">作成日</th>
								<th style="width: 80px;" class="text-end">閲覧</th>
								<th style="width: 80px;" class="text-end">いいね</th>
								<th style="width: 90px;" class="text-end">コメント</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="board : ${list}">
								<td th:text="${board.boardId}">1</td>

								<td>
									<a class="text-decoration-none fw-semibold"
										th:href="@{/board/{id}(id=${board.boardId})}" th:text="${board.title}">
										タイトル
									</a>
								</td>

								<td th:text="${board.writerName}">作成者</td>

								<td class="text-muted" th:text="${#temporals.format(board.createdAt, 'yyyy/MM/dd')}">
								</td>

								<td class="text-end" th:text="${board.viewCount}">0</td>
								<td class="text-end" th:text="${board.likeCount}">0</td>
								<td class="text-end" th:text="${board.commentCount}">0</td>
							</tr>
						</tbody>
					</table>
				</div>

			</div>
		</div>

		<!-- Pagination -->
		<nav class="mt-3" th:if="${pageDto.pages > 0}">
		  <ul class="pagination justify-content-center mb-0">

		    <li class="page-item" th:classappend="${pageDto.currentPage == 1} ? 'disabled'">
		      <a class="page-link"
		         th:href="@{/board(currentPage=1, searchType=${pageDto.searchType}, keyword=${pageDto.keyword})}"
		         tabindex="-1">&laquo;</a>
		    </li>

		    <li class="page-item" th:classappend="${pageDto.startPage == 1} ? 'disabled'">
		      <a class="page-link"
		         th:href="@{/board(currentPage=${(pageDto.startPage - 1) < 1 ? 1 : (pageDto.startPage - 1)},
		                           searchType=${pageDto.searchType},
		                           keyword=${pageDto.keyword})}">
		        &lsaquo;
		      </a>
		    </li>

		    <li class="page-item"
		        th:each="p : ${#numbers.sequence(pageDto.startPage, pageDto.endPage)}"
		        th:classappend="${p == pageDto.currentPage} ? 'active'">
		      <a class="page-link"
		         th:href="@{/board(currentPage=${p}, searchType=${pageDto.searchType}, keyword=${pageDto.keyword})}"
		         th:text="${p}">1</a>
		    </li>

		    <li class="page-item" th:classappend="${pageDto.endPage == pageDto.pages} ? 'disabled'">
		      <a class="page-link"
		         th:href="@{/board(currentPage=${(pageDto.endPage + 1) > pageDto.pages ? pageDto.pages : (pageDto.endPage + 1)},
		                           searchType=${pageDto.searchType},
		                           keyword=${pageDto.keyword})}">
		        &rsaquo;
		      </a>
		    </li>

		    <li class="page-item" th:classappend="${pageDto.currentPage == pageDto.pages} ? 'disabled'">
		      <a class="page-link"
		         th:href="@{/board(currentPage=${pageDto.pages}, searchType=${pageDto.searchType}, keyword=${pageDto.keyword})}">
		        &raquo;
		      </a>
		    </li>

		  </ul>
		</nav>




	</main>

</body>

</html>