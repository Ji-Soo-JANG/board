<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>新規投稿</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
	<!-- Header -->
	<header class="border-bottom py-3 bg-light">
		<div class="container d-flex align-items-center">
			<h2 class="mb-0">LOGO</h2>
			<a class="btn btn-outline-secondary ms-auto" th:href="@{/}">ホームへ</a>
		</div>
	</header>

	<main class="container py-4">
		<div class="d-flex align-items-end justify-content-between mb-3">
			<div>
				<h3 class="mb-0">新規投稿</h3>
			</div>
		</div>

		<div class="card shadow-sm">
			<div class="card-body">
				<form method="post" th:action="${mode == 'edit'}
				 ? @{/board/update/{boardId}(boardId=*{boardId})}
				  : @{/board/write}" th:object="${board}">
				  
					<div class="mb-3">
						<label class="form-label">タイトル</label>
						<input type="text" class="form-control" th:field="*{title}" placeholder="タイトルを入力してください。"
							maxlength="100" required>
					</div>

					<div class="mb-3">
						<label class="form-label">内容</label>
						<textarea id="editor" class="form-control" th:field="*{content}" rows="10"
							placeholder="本文を入力してください">
						</textarea>
					</div>

					<div class="d-flex justify-content-end gap-2">
						<span sec:authorize="hasRole('ADMIN')">isNotice <input type="checkbox" th:field="*{isNotice}" value="Y"></span> 
						<a class="btn btn-outline-secondary" th:href="@{/board}">キャンセル</a>
						<button type="submit" class="btn btn-primary"
						        th:text="${mode == 'edit'} ? '保存する' : '投稿する'"></button>
					</div>
				</form>
			</div>
		</div>
	</main>

	<!-- Footer -->
	<footer class="border-top py-3 text-center text-muted">
	</footer>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<!-- CKEditor 5 -->
	<script src="https://cdn.ckeditor.com/ckeditor5/41.0.0/classic/ckeditor.js"></script>
	<script>
		$(function () {
			ClassicEditor
				.create(document.querySelector('#editor'))
				.catch(console.error);
		});
	</script>
</body>

</html>